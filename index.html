<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>D'Best Site</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <header>
  <div class="top-bar">
    <div id="nav-toggle">&#9776;</div> <!-- Hamburger icon -->
    <h1>D'Best Site</h1>
    <div id="header-footer">&copy; 2025 D'Best Site</div>
  </div>

  <div id="tag-cloud-header"></div> <!-- Horizontal tag cloud inside header -->
</header>

 
<aside id="tag-sidebar">
  <div id="sidebar-close">âœ–</div> <!-- Close button -->
  <div id="tag-cloud"></div> <!-- Sidebar tag cloud -->
</aside>

  <main>
  <div id="video-list"></div>
</main>



  <script>
    let videos = [];

    fetch('video.json')
      .then(response => response.json())
      .then(data => {
        videos = data.reverse(); // newest first
        renderVideos(videos);
        generateTagCloud(videos);
      });

    function renderVideos(videoList) {
      const container = document.getElementById('video-list');
      container.innerHTML = '';

      videoList.forEach((video, index) => {
        const card = document.createElement('div');
        card.className = 'video-card';

        card.innerHTML = `
          <a href="post.html?id=${videos.length - 1 - index}">
            <img src="${video.thumbnail}" alt="${video.title}" class="thumb" />
            <h3>${video.title}</h3>
          </a>
          <p class="taglist">${video.tags}</p>
        `;

        container.appendChild(card);
      });
    }

    function generateTagCloud(videoList) {
      const tagSet = new Set();
      videoList.forEach(video => {
        video.tags.split(',').map(tag => tag.trim()).forEach(t => tagSet.add(t));
      });

      const tagCloud = document.getElementById('tag-cloud');
      tagCloud.innerHTML = '';
      tagSet.forEach(tag => {
        const tagEl = document.createElement('span');
        tagEl.className = 'tag';
        tagEl.textContent = tag;
        tagEl.onclick = () => {
          const filtered = videos.filter(v => v.tags.includes(tag));
          renderVideos(filtered);
        };
        tagCloud.appendChild(tagEl);
      });
    }

    document.getElementById('search').addEventListener('input', (e) => {
      const keyword = e.target.value.toLowerCase();
      const filtered = videos.filter(v =>
        v.title.toLowerCase().includes(keyword) || v.tags.toLowerCase().includes(keyword)
      );
      renderVideos(filtered);
    });


    const navToggle = document.getElementById('nav-toggle');
const sidebar = document.getElementById('tag-sidebar');
const sidebarClose = document.getElementById('sidebar-close');

navToggle.addEventListener('click', () => {
  sidebar.classList.add('open');
});

sidebarClose.addEventListener('click', () => {
  sidebar.classList.remove('open');
});

  </script>
</body>
</html>